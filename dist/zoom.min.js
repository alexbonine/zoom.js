/**
 * Pure JavaScript implementation of zoom.js.
 *
 * This fork extends the zoom.js script to work on divs as well.
 * The divs can also have hidden text that will transition into view.
 * Available at: https://github.com/alexbonine/zoom.js
 *
 * Original preamble:
 * zoom.js - It's the best way to zoom an image
 * @version v0.0.2
 * @link https://github.com/fat/zoom.js
 * @license MIT
 *
 * Needs a related CSS file to work. See the README at
 * https://github.com/nishanths/zoom.js for more info.
 *
 * This is a fork of the original zoom.js implementation by @fat.
 * Copyrights for the original project are held by @fat. All other copyright
 * for changes in the fork are held by Nishanth Shanmugham.
 *
 * Copyright (c) 2013 @fat
 * The MIT License. Copyright © 2016 Nishanth Shanmugham.
 * The MIT License. Copyright © 2017 Alex Bonine.
 */
!function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();!function(t){function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var e={};return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=4)}([function(t,i,e){e.d(i,"a",function(){return n}),e.d(i,"b",function(){return s}),e.d(i,"c",function(){return o}),e.d(i,"d",function(){return r});var n=function(){return document.documentElement.clientWidth},s=function(){return document.documentElement.clientHeight},o=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.getBoundingClientRect(),s=document.documentElement,o=window;return{top:n.top+o.pageYOffset-s.clientTop-i,left:n.left+o.pageXOffset-s.clientLeft-e}},r=function(t,i,e){var n=function t(n){n.target.removeEventListener(i,t),e()};t.addEventListener(i,n)}},function(t,i,e){var n=e(3),s=e(2),o=e(0);e.d(i,"a",function(){return b});var r=null,a=80,h=-1,l=-1,d=function(t){t.addEventListener("click",u)},u=function(t){if(!document.body.classList.contains("zoom-overlay-open")){if(t.metaKey||t.ctrlKey)return void window.open(t.target.getAttribute("data-original")||t.target.src,"_blank");if(!(t.target.width>=e.i(o.a)()-a)){if(c(!0),"IMG"===t.currentTarget.tagName)r=new n.a(t.currentTarget,a);else{if("DIV"!==t.currentTarget.tagName)return;r=new s.a(t.currentTarget,a)}r.zoom(),v()}}},c=function(t){null!=r&&(t?r.dispose():r.close(),m(),r=null)},v=function(){document.addEventListener("scroll",f),document.addEventListener("keyup",p),document.addEventListener("touchstart",g),document.addEventListener("click",w,!0)},m=function(){document.removeEventListener("scroll",f),document.removeEventListener("keyup",p),document.removeEventListener("touchstart",g),document.removeEventListener("click",w,!0)},f=function(){-1==h&&(h=window.pageYOffset);var t=Math.abs(h-window.pageYOffset);t>=40&&c()},p=function(t){27==t.keyCode&&c()},g=function(t){var i=t.touches[0];null!=i&&(l=i.pageY,t.target.addEventListener("touchmove",y))},y=function t(i){var e=i.touches[0];null!=e&&Math.abs(e.pageY-l)>10&&(c(),i.target.removeEventListener("touchmove",t))},w=function(){c()},b=Object.create(null);b.setup=d},function(e,n,s){var o=s(0),r=function(){function e(i,n){t(this,e),this.originalHeight=i.clientHeight,this.invisiblesHeight=this.getInvisiblesHeight(n),this.height=this.originalHeight+this.invisiblesHeight,this.originalWidth=i.clientWidth,this.width=Math.ceil(this.originalWidth,this.getInvisiblesWidth(n)),this.invisiblesWidth=this.width-this.originalWidth}return i(e,[{key:"getInvisiblesWidth",value:function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e].clientWidth;return i}},{key:"getInvisiblesHeight",value:function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e].clientHeight;return i}}]),e}(),a=function(){function e(i,n){t(this,e),this.div=i,this.preservedTransform=i.style.transform,this.wrap=null,this.overlay=null,this.offset=n,this.divSize=null,this.invisibles=null}return i(e,[{key:"forceRepaint",value:function(){this.div.offsetWidth}},{key:"zoom",value:function(){this.invisibles=this.div.getElementsByClassName("invisible"),this.divSize=new r(this.div,this.invisibles),this.wrap=document.createElement("div"),this.wrap.classList.add("zoom-div-wrap"),this.div.parentNode.insertBefore(this.wrap,this.div),this.wrap.appendChild(this.div),this.div.classList.add("zoom-div"),this.div.setAttribute("data-action","zoom-out"),this.overlay=document.createElement("div"),this.overlay.classList.add("zoom-overlay"),document.body.appendChild(this.overlay),this.div.style.height=this.divSize.originalHeight+"px",this.div.style.width=this.divSize.originalWidth+"px",this.forceRepaint();var t=this.calculateScale(this.divSize);this.forceRepaint(),this.showInvisibles(),this.animate(t),document.body.classList.add("zoom-overlay-open")}},{key:"showInvisibles",value:function(){this.div.style.height=this.divSize.height+"px",this.div.style.width=this.divSize.width+"px";for(var t=0;t<this.invisibles.length;t++)this.invisibles[t].style.position="relative",this.invisibles[t].style.visibility="visible",this.invisibles[t].style.opacity=1}},{key:"hideInvisibles",value:function(){this.div.style.height=this.divSize.originalHeight+"px",this.div.style.width=this.divSize.originalWidth+"px";for(var t=0;t<this.invisibles.length;t++)this.invisibles[t].removeAttribute("style");this.div.removeAttribute("style")}},{key:"calculateScale",value:function(t){var i=1,e=s.i(o.a)()-this.offset,n=s.i(o.b)()-this.offset,r=t.width/t.height,a=e/n;return t.width<e&&t.height<n?i:a>r?n/t.height*i:e/t.width*i}},{key:"animate",value:function(t){var i=s.i(o.c)(this.div,this.divSize.invisiblesHeight,this.divSize.invisiblesWidth),e=window.pageYOffset,n=s.i(o.a)()/2,r=e+s.i(o.b)()/2,a=i.left+this.divSize.width/2,h=i.top+this.divSize.height/2,l=n-a,d=r-h,u=0,c="scale("+t+")",v="translate3d("+l+"px, "+d+"px, "+u+"px)";this.div.style.transform=c,this.wrap.style.transform=v}},{key:"dispose",value:function(){null!=this.wrap&&null!=this.wrap.parentNode&&(this.div.classList.remove("zoom-div"),this.div.setAttribute("data-action","zoom"),this.wrap.parentNode.insertBefore(this.div,this.wrap),this.wrap.parentNode.removeChild(this.wrap),document.body.removeChild(this.overlay),document.body.classList.remove("zoom-overlay-transitioning"))}},{key:"close",value:function(){var t=this;document.body.classList.add("zoom-overlay-transitioning"),this.div.style.transform=this.preservedTransform,this.hideInvisibles(),0===this.div.style.length&&this.div.removeAttribute("style"),this.wrap.style.transform="none",s.i(o.d)(this.div,"transitionend",function(){t.dispose(),document.body.classList.remove("zoom-overlay-open")})}}]),e}();n.a=a},function(e,n,s){var o=s(0),r=function i(e,n){t(this,i),this.w=e,this.h=n},a=function(){function e(i,n){t(this,e),this.img=i,this.preservedTransform=i.style.transform,this.wrap=null,this.overlay=null,this.offset=n}return i(e,[{key:"forceRepaint",value:function(){this.img.offsetWidth}},{key:"zoom",value:function(){var t=new r(this.img.naturalWidth,this.img.naturalHeight);this.wrap=document.createElement("div"),this.wrap.classList.add("zoom-img-wrap"),this.img.parentNode.insertBefore(this.wrap,this.img),this.wrap.appendChild(this.img),this.img.classList.add("zoom-img"),this.img.setAttribute("data-action","zoom-out"),this.overlay=document.createElement("div"),this.overlay.classList.add("zoom-overlay"),document.body.appendChild(this.overlay),this.forceRepaint();var i=this.calculateScale(t);this.forceRepaint(),this.animate(i),document.body.classList.add("zoom-overlay-open")}},{key:"calculateScale",value:function(t){var i=t.w/this.img.width,e=s.i(o.a)()-this.offset,n=s.i(o.b)()-this.offset,r=t.w/t.h,a=e/n;return t.w<e&&t.h<n?i:a>r?n/t.h*i:e/t.w*i}},{key:"animate",value:function(t){var i=s.i(o.c)(this.img),e=window.pageYOffset,n=s.i(o.a)()/2,r=e+s.i(o.b)()/2,a=i.left+this.img.width/2,h=i.top+this.img.height/2,l=n-a,d=r-h,u=0,c="scale("+t+")",v="translate3d("+l+"px, "+d+"px, "+u+"px)";this.img.style.transform=c,this.wrap.style.transform=v}},{key:"dispose",value:function(){null!=this.wrap&&null!=this.wrap.parentNode&&(this.img.classList.remove("zoom-img"),this.img.setAttribute("data-action","zoom"),this.wrap.parentNode.insertBefore(this.img,this.wrap),this.wrap.parentNode.removeChild(this.wrap),document.body.removeChild(this.overlay),document.body.classList.remove("zoom-overlay-transitioning"))}},{key:"close",value:function(){var t=this;document.body.classList.add("zoom-overlay-transitioning"),this.img.style.transform=this.preservedTransform,0===this.img.style.length&&this.img.removeAttribute("style"),this.wrap.style.transform="none",s.i(o.d)(this.img,"transitionend",function(){t.dispose(),document.body.classList.remove("zoom-overlay-open")})}}]),e}();n.a=a},function(t,i,e){Object.defineProperty(i,"__esModule",{value:!0});var n=e(1);document.addEventListener("DOMContentLoaded",function(){for(var t=document.querySelectorAll("img[data-action='zoom'], div[data-action='zoom']"),i=0;i<t.length;i++)n.a.setup(t[i])})}])}();